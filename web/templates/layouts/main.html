<!DOCTYPE html>
<html lang="es" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#0f172a',
                            surface: '#1e293b',
                            border: '#334155',
                            text: '#e2e8f0',
                            muted: '#94a3b8'
                        }
                    }
                }
            }
        }
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Alpine.js Reusable Components -->
    <script>
        // Health Card Component
        function healthCard(statusType, count, severity, onClick) {
            return {
                statusType: statusType,
                count: count,
                severity: severity,
                onClick: onClick,
                
                get icon() {
                    const icons = {
                        'ok': '‚úÖ',
                        'orphan_download': 'üì•',
                        'only_hardlink': 'üîó',
                        'not_seeding': 'üíÄ',
                        'missing_metadata': 'üëÅÔ∏è'
                    };
                    return icons[this.statusType] || '‚ùì';
                },
                
                get title() {
                    const titles = {
                        'ok': 'Archivos Saludables',
                        'orphan_download': 'Hu√©rfanos en Descargas',
                        'only_hardlink': 'Solo Hardlinks',
                        'not_seeding': 'Torrents Muertos',
                        'missing_metadata': 'Sin Reproducir'
                    };
                    return titles[this.statusType] || 'Desconocido';
                },
                
                get description() {
                    const descriptions = {
                        'ok': 'Todo correcto',
                        'orphan_download': 'En descargas pero no en biblioteca',
                        'only_hardlink': 'Archivos con hardlinks',
                        'not_seeding': 'Sin seeds activos',
                        'missing_metadata': 'Nunca vistos en Jellyfin'
                    };
                    return descriptions[this.statusType] || '';
                },
                
                get bgColorClasses() {
                    const classes = {
                        'ok': 'bg-green-900/20 border-green-600/50 hover:bg-green-900/30',
                        'warning': 'bg-yellow-900/20 border-yellow-600/50 hover:bg-yellow-900/30',
                        'info': 'bg-blue-900/20 border-blue-600/50 hover:bg-blue-900/30',
                        'critical': 'bg-red-900/20 border-red-600/50 hover:bg-red-900/30'
                    };
                    return classes[this.severity] || 'bg-gray-900/20 border-gray-600/50';
                },
                
                handleClick() {
                    if (typeof this.onClick === 'function') {
                        this.onClick();
                    }
                }
            };
        }
        
        // Health Status Badge Component
        function healthStatusBadge(status, severity, size = 'md') {
            return {
                status: status,
                severity: severity,
                size: size,
                
                get icon() {
                    const icons = {
                        'ok': '‚úÖ',
                        'orphan_download': 'üì•',
                        'only_hardlink': 'üîó',
                        'not_seeding': 'üíÄ',
                        'missing_metadata': 'üëÅÔ∏è',
                        'critical': 'üî¥'
                    };
                    return icons[this.status] || '‚ùì';
                },
                
                get label() {
                    const labels = {
                        'ok': 'OK',
                        'orphan_download': 'Hu√©rfano',
                        'only_hardlink': 'Hardlink',
                        'not_seeding': 'Muerto',
                        'missing_metadata': 'Sin Ver',
                        'critical': 'Cr√≠tico'
                    };
                    return labels[this.status] || 'Desconocido';
                },
                
                get colorClasses() {
                    const classes = {
                        'ok': 'bg-green-900/30 border-green-600/50 text-green-300',
                        'warning': 'bg-yellow-900/30 border-yellow-600/50 text-yellow-300',
                        'info': 'bg-blue-900/30 border-blue-600/50 text-blue-300',
                        'critical': 'bg-red-900/30 border-red-600/50 text-red-300'
                    };
                    return classes[this.severity] || 'bg-gray-900/30 border-gray-600/50 text-gray-300';
                },
                
                get sizeClasses() {
                    const sizes = {
                        'sm': 'px-2 py-0.5 text-xs',
                        'md': 'px-3 py-1 text-sm',
                        'lg': 'px-4 py-2 text-base'
                    };
                    return sizes[this.size] || sizes['md'];
                }
            };
        }
        
        // Service Status Indicator Component
        function serviceStatusIndicator(serviceName, isPresent, details = {}) {
            return {
                serviceName: serviceName,
                isPresent: isPresent,
                details: details,
                showTooltip: false,
                
                get icon() {
                    const icons = {
                        'qbittorrent': 'üß≤',
                        'radarr': 'üé¨',
                        'sonarr': 'üì∫',
                        'jellyfin': 'üé≠',
                        'jellyseerr': 'üé´',
                        'jellystat': 'üìä'
                    };
                    return icons[this.serviceName] || '‚ùì';
                },
                
                get label() {
                    const labels = {
                        'qbittorrent': 'qBit',
                        'radarr': 'Radarr',
                        'sonarr': 'Sonarr',
                        'jellyfin': 'Jellyfin',
                        'jellyseerr': 'Jellyseerr',
                        'jellystat': 'Jellystat'
                    };
                    return labels[this.serviceName] || this.serviceName;
                },
                
                get colorClasses() {
                    if (this.isPresent) {
                        return 'bg-green-900/30 border-green-600/50 text-green-300';
                    }
                    return 'bg-gray-900/30 border-gray-600/50 text-gray-500';
                },
                
                get hasDetails() {
                    return this.details && Object.keys(this.details).length > 0;
                }
            };
        }
        
        // Health Filters Component
        function healthFilters() {
            return {
                selectedProblem: 'all',
                selectedService: 'all',
                selectedSize: 'all',
                selectedAge: 'all',
                searchQuery: '',
                
                get problemOptions() {
                    return [
                        { value: 'all', label: 'Todos los problemas' },
                        { value: 'orphan', label: 'Hu√©rfanos' },
                        { value: 'dead_torrent', label: 'Torrents muertos' },
                        { value: 'unwatched', label: 'Sin reproducir' },
                        { value: 'hardlink', label: 'Solo hardlinks' }
                    ];
                },
                
                get serviceOptions() {
                    return [
                        { value: 'all', label: 'Todos los servicios' },
                        { value: 'qbittorrent', label: 'qBittorrent' },
                        { value: 'radarr', label: 'Radarr' },
                        { value: 'sonarr', label: 'Sonarr' },
                        { value: 'jellyfin', label: 'Jellyfin' },
                        { value: 'jellyseerr', label: 'Jellyseerr' }
                    ];
                },
                
                get sizeOptions() {
                    return [
                        { value: 'all', label: 'Todos los tama√±os' },
                        { value: 'small', label: '< 1 GB' },
                        { value: 'medium', label: '1-10 GB' },
                        { value: 'large', label: '10-50 GB' },
                        { value: 'xlarge', label: '> 50 GB' }
                    ];
                },
                
                get ageOptions() {
                    return [
                        { value: 'all', label: 'Cualquier antig√ºedad' },
                        { value: 'week', label: '√öltima semana' },
                        { value: 'month', label: '√öltimo mes' },
                        { value: 'quarter', label: '√öltimos 3 meses' },
                        { value: 'year', label: '√öltimo a√±o' },
                        { value: 'old', label: 'M√°s de 1 a√±o' }
                    ];
                },
                
                get hasActiveFilters() {
                    return this.selectedProblem !== 'all' || 
                           this.selectedService !== 'all' || 
                           this.selectedSize !== 'all' || 
                           this.selectedAge !== 'all' || 
                           this.searchQuery !== '';
                },
                
                get activeFilterCount() {
                    let count = 0;
                    if (this.selectedProblem !== 'all') count++;
                    if (this.selectedService !== 'all') count++;
                    if (this.selectedSize !== 'all') count++;
                    if (this.selectedAge !== 'all') count++;
                    if (this.searchQuery !== '') count++;
                    return count;
                },
                
                applyFilters() {
                    const filterData = {
                        problem: this.selectedProblem,
                        service: this.selectedService,
                        size: this.selectedSize,
                        age: this.selectedAge,
                        search: this.searchQuery
                    };
                    
                    this.$dispatch('filters-changed', filterData);
                },
                
                clearFilters() {
                    this.selectedProblem = 'all';
                    this.selectedService = 'all';
                    this.selectedSize = 'all';
                    this.selectedAge = 'all';
                    this.searchQuery = '';
                    this.applyFilters();
                }
            };
        }
    </script>
</head>

<body class="bg-dark-bg dark:bg-dark-bg">
    <nav class="bg-dark-surface dark:bg-dark-surface shadow-lg border-b border-dark-border">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <h1 class="text-xl font-bold text-dark-text dark:text-dark-text">KeeperCheky</h1>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="/"
                            class="border-transparent text-dark-muted hover:border-blue-500 hover:text-dark-text dark:text-dark-muted dark:hover:text-dark-text inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors">
                            Dashboard
                        </a>
                        <a href="/files"
                            class="border-transparent text-dark-muted hover:border-blue-500 hover:text-dark-text dark:text-dark-muted dark:hover:text-dark-text inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors">
                            üóÇÔ∏è Archivos
                        </a>
                        <a href="/schedules"
                            class="border-transparent text-dark-muted hover:border-blue-500 hover:text-dark-text dark:text-dark-muted dark:hover:text-dark-text inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors">
                            Schedules
                        </a>
                        <a href="/settings"
                            class="border-transparent text-dark-muted hover:border-blue-500 hover:text-dark-text dark:text-dark-muted dark:hover:text-dark-text inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors">
                            Settings
                        </a>
                        <a href="/logs"
                            class="border-transparent text-dark-muted hover:border-blue-500 hover:text-dark-text dark:text-dark-muted dark:hover:text-dark-text inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors">
                            Logs
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        {{embed}}
    </main>
</body>

</html>